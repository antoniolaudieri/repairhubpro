-- Add additional diagnostic columns to device_health_readings
ALTER TABLE public.device_health_readings
ADD COLUMN IF NOT EXISTS network_type TEXT,
ADD COLUMN IF NOT EXISTS network_connected BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS screen_width INTEGER,
ADD COLUMN IF NOT EXISTS screen_height INTEGER,
ADD COLUMN IF NOT EXISTS pixel_ratio REAL,
ADD COLUMN IF NOT EXISTS timezone TEXT,
ADD COLUMN IF NOT EXISTS language TEXT,
ADD COLUMN IF NOT EXISTS cpu_cores INTEGER,
ADD COLUMN IF NOT EXISTS connection_downlink REAL,
ADD COLUMN IF NOT EXISTS connection_effective_type TEXT,
ADD COLUMN IF NOT EXISTS connection_rtt INTEGER,
ADD COLUMN IF NOT EXISTS device_memory_gb REAL,
ADD COLUMN IF NOT EXISTS hardware_concurrency INTEGER,
ADD COLUMN IF NOT EXISTS touch_support BOOLEAN,
ADD COLUMN IF NOT EXISTS max_touch_points INTEGER,
ADD COLUMN IF NOT EXISTS online_status BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS color_depth INTEGER,
ADD COLUMN IF NOT EXISTS orientation TEXT,
ADD COLUMN IF NOT EXISTS latitude REAL,
ADD COLUMN IF NOT EXISTS longitude REAL;

-- Add same columns to device_health_logs for historical tracking
ALTER TABLE public.device_health_logs
ADD COLUMN IF NOT EXISTS network_type TEXT,
ADD COLUMN IF NOT EXISTS network_connected BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS screen_width INTEGER,
ADD COLUMN IF NOT EXISTS screen_height INTEGER,
ADD COLUMN IF NOT EXISTS pixel_ratio REAL,
ADD COLUMN IF NOT EXISTS timezone TEXT,
ADD COLUMN IF NOT EXISTS language TEXT,
ADD COLUMN IF NOT EXISTS cpu_cores INTEGER,
ADD COLUMN IF NOT EXISTS connection_downlink REAL,
ADD COLUMN IF NOT EXISTS connection_effective_type TEXT,
ADD COLUMN IF NOT EXISTS connection_rtt INTEGER,
ADD COLUMN IF NOT EXISTS device_memory_gb REAL,
ADD COLUMN IF NOT EXISTS hardware_concurrency INTEGER,
ADD COLUMN IF NOT EXISTS touch_support BOOLEAN,
ADD COLUMN IF NOT EXISTS max_touch_points INTEGER,
ADD COLUMN IF NOT EXISTS online_status BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS color_depth INTEGER,
ADD COLUMN IF NOT EXISTS orientation TEXT,
ADD COLUMN IF NOT EXISTS latitude REAL,
ADD COLUMN IF NOT EXISTS longitude REAL;